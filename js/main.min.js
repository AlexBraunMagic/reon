"use strict";const contentBox=document.querySelector(".content__box"),paginationList=document.querySelector(".pagination-list"),searchInput=document.querySelector(".filter__box-input"),addPostOpenBtn=document.querySelector(".add-post__open-btn"),addPostBox=document.querySelector(".add-post___box");let startPosition=0,quantityPosts=10,pageNumber=0;function createContentBoxItem(t){const e=document.createElement("a");e.className="content__item-title",e.textContent=t.title,e.id=t.id,e.href="onePostPage.html",e.addEventListener("click",(t=>{const e=t.target.id;localStorage.setItem("id",e)}));const n=document.createElement("p");n.className="content__item-id",n.textContent=`Post â„–-${t.id}`;const o=document.createElement("button");o.className="content__item-delete-btn",o.textContent="Delete Post",o.addEventListener("click",(()=>{deletePost(t)}));const a=document.createElement("div");a.classList="content__id-btn-box",a.appendChild(n),a.appendChild(o);const i=document.createElement("div");i.className="content__item-head",i.appendChild(e),i.appendChild(a);const s=document.createElement("p");s.className="content__item-info",s.textContent=t.body;const c=document.createElement("div");return c.className="content__box-item",c.id=t.id,c.appendChild(i),c.appendChild(s),c}function createPagination(t){const e=document.createElement("li");return e.className="pagination-list__item",e.textContent=t,e.addEventListener("click",(t=>{addBgForPaginationItem(t),nextPage(t)})),e}async function getPosts(t,e){const n=await fetch("https://jsonplaceholder.typicode.com/posts");let o=await n.json();if(pageNumber=getPages(o),o=o.splice(t,e),contentBox.innerHTML="",paginationList.innerHTML="",paginationList){for(let t=0;t<pageNumber;t++)paginationList.appendChild(createPagination(t+1));addFirstPageBg()}for(let t of o)showPosts(t)}async function getNextPageData(t,e){const n=await fetch("https://jsonplaceholder.typicode.com/posts");let o=await n.json();o=o.splice(t,e);for(let t of o)showPosts(t)}function deletePost(t){const e=document.querySelectorAll(".content__box-item");for(let n of e)t.id===Number(n.id)&&contentBox.removeChild(n)}function showPosts(t){contentBox&&contentBox.append(createContentBoxItem(t))}function getPages(t){return Math.ceil(t.length/quantityPosts)}function addFirstPageBg(){document.querySelector(".pagination-list__item").classList.add("pagination-list__item--active")}function addBgForPaginationItem(t){const e=document.querySelectorAll(".pagination-list__item");for(let t of e)t.classList.contains("pagination-list__item--active")&&t.classList.remove("pagination-list__item--active");t.target.classList.add("pagination-list__item--active")}function nextPage(t){const e=t.target.textContent;startPosition=e*quantityPosts-10,contentBox.innerHTML="",getNextPageData(startPosition,quantityPosts)}async function searchPost(t){const e=t.value,n=await fetch("https://jsonplaceholder.typicode.com/posts");let o=await n.json();const a=o.filter((t=>{if(t.title.includes(e)||t.body.includes(e))return t}));if(a.length){if(pageNumber=getPages(a),o=a.splice(startPosition,quantityPosts),contentBox.innerHTML="",paginationList.innerHTML="",paginationList){for(let t=0;t<pageNumber;t++)paginationList.appendChild(createPagination(t+1));addFirstPageBg()}for(let t of o)showPosts(t)}else contentBox.innerHTML="",paginationList.innerHTML="",contentBox.appendChild(notFoundBox())}function notFoundBox(){const t=document.createElement("h2");return t.className="content__not-found",t.textContent="Not found",t}""!=searchInput.value?getPosts(startPosition,quantityPosts):searchPost(searchInput),searchInput.addEventListener("keydown",(()=>{""===searchInput.value?getPosts(startPosition,quantityPosts):searchPost(searchInput)})),addPostOpenBtn.addEventListener("click",(()=>{addPostBox.classList.contains("add-post___box--active")?(addPostBox.classList.remove("add-post___box--active"),addPostOpenBtn.textContent="Add new post"):(addPostBox.classList.add("add-post___box--active"),addPostOpenBtn.textContent="Close")}));